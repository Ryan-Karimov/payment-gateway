# История изменений

Все значимые изменения проекта документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
проект следует [Семантическому Версионированию](https://semver.org/lang/ru/).

## [Unreleased]

### Добавлено
- Подготовка к первому релизу

## [1.0.0] - 2024-01-15

### Добавлено

#### Основные функции
- Создание платежей с провайдерами Stripe и PayPal (эмуляция)
- Поддержка полных и частичных возвратов
- Идемпотентность с двойным хранилищем (Redis + PostgreSQL)
- Saga паттерн для оркестрации платежей
- Circuit breaker для отказоустойчивости провайдеров

#### API
- RESTful API на фреймворке Fastify
- Swagger/OpenAPI документация
- Аутентификация по API ключам
- Rate limiting по мерчантам
- Пагинация для списков

#### Вебхуки
- Доставка вебхуков с экспоненциальным backoff
- Верификация подписей HMAC-SHA256
- RabbitMQ для надёжной доставки
- Настраиваемое количество попыток

#### Наблюдаемость
- Prometheus метрики
- Grafana дашборд
- OpenTelemetry распределённая трассировка
- Интеграция с Jaeger
- Sentry для отслеживания ошибок
- Структурированное логирование с Pino

#### Инфраструктура
- Docker и Docker Compose конфигурация
- Kubernetes манифесты (Deployment, Service, HPA, PDB)
- GitHub Actions CI/CD пайплайн
- Многоэтапный Dockerfile

#### Безопасность
- Хэширование API ключей с SHA-256
- Timing-safe сравнение строк
- SSRF защита для вебхуков
- Non-root пользователь в контейнере
- Валидация входных данных

#### Документация
- Полноценный README
- Architecture Decision Records (ADR)
- Документация API с примерами
- Руководство для контрибьюторов

### Технические детали

#### Схема базы данных
- `payments` - записи платежей
- `transactions` - история транзакций
- `refunds` - записи возвратов
- `idempotency_keys` - хранилище идемпотентности
- `webhook_events` - очередь вебхуков
- `api_keys` - аутентификация API
- `audit_logs` - аудит-лог

#### Покрытие тестами
- 130 unit и интеграционных тестов
- ~80% покрытие кода
- Нагрузочное тестирование с k6

---

## История версий

| Версия | Дата | Описание |
|--------|------|----------|
| 1.0.0 | 2024-01-15 | Первый релиз |

[Unreleased]: https://github.com/yourusername/payment-gateway/compare/v1.0.0...HEAD
[1.0.0]: https://github.com/yourusername/payment-gateway/releases/tag/v1.0.0
